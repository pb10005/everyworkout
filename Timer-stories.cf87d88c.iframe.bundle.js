(self.webpackChunkmy_t3_app=self.webpackChunkmy_t3_app||[]).push([[454],{"./node_modules/@heroicons/react/20/solid/ArrowPathIcon.js":(module,__unused_webpack_exports,__webpack_require__)=>{const React=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const ForwardRef=React.forwardRef((function ArrowPathIcon({title,titleId,...props},svgRef){return React.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?React.createElement("title",{id:titleId},title):null,React.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z",clipRule:"evenodd"}))}));module.exports=ForwardRef},"./node_modules/@heroicons/react/20/solid/PauseIcon.js":(module,__unused_webpack_exports,__webpack_require__)=>{const React=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const ForwardRef=React.forwardRef((function PauseIcon({title,titleId,...props},svgRef){return React.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?React.createElement("title",{id:titleId},title):null,React.createElement("path",{d:"M5.75 3a.75.75 0 00-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75V3.75A.75.75 0 007.25 3h-1.5zM12.75 3a.75.75 0 00-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 00.75-.75V3.75a.75.75 0 00-.75-.75h-1.5z"}))}));module.exports=ForwardRef},"./node_modules/@heroicons/react/20/solid/PlayIcon.js":(module,__unused_webpack_exports,__webpack_require__)=>{const React=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const ForwardRef=React.forwardRef((function PlayIcon({title,titleId,...props},svgRef){return React.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:svgRef,"aria-labelledby":titleId},props),title?React.createElement("title",{id:titleId},title):null,React.createElement("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"}))}));module.exports=ForwardRef},"./src/components/Timer.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("./src/components/Timer.tsx").M,title:"Timer",tags:["autodocs"]},Default={args:{expiryTimeDelta:120,onExpire:()=>{alert("expired")}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    expiryTimeDelta: 120,\n    onExpire: () => {\n      alert('expired');\n    }\n  }\n}",...Default.parameters?.docs?.source}}}},"./src/components/Timer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>Timer});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("./node_modules/react-timer-hook/dist/index.js"),PlayIcon=__webpack_require__("./node_modules/@heroicons/react/20/solid/PlayIcon.js"),PauseIcon=__webpack_require__("./node_modules/@heroicons/react/20/solid/PauseIcon.js"),ArrowPathIcon=__webpack_require__("./node_modules/@heroicons/react/20/solid/ArrowPathIcon.js");const Timer=({expiryTimeDelta,onExpire,variant="standard",className})=>{const[isExpired,setExpired]=(0,react.useState)(!1),tmp=(new Date).getSeconds()+expiryTimeDelta,expiryTimestamp=new Date;expiryTimestamp.setSeconds(tmp);const{requestPermission,notify}=(()=>{const[permission,setPermission]=(0,react.useState)();return(0,react.useEffect)((()=>{setPermission(Notification.permission),navigator.permissions.query({name:"notifications"}).then((permissionStatus=>{permissionStatus.onchange=()=>{setPermission(Notification.permission)}})).catch((()=>{alert("エラーが発生しました")}))})),{permission,requestPermission:async forceRequest=>{"Notification"in window?("default"===Notification.permission||forceRequest)&&await Notification.requestPermission():alert("このブラウザーはデスクトップ通知に対応していません。")},notify:message=>{"Notification"in window?"granted"===Notification.permission?new Notification(message):"denied"!==Notification.permission&&Notification.requestPermission().then((permission=>{"granted"===permission&&new Notification(message)})).catch((()=>{alert("エラーが発生しました")})):alert("このブラウザーはデスクトップ通知に対応していません。")}}})(),{seconds,minutes,pause,resume,restart}=(0,dist.useTimer)({expiryTimestamp,autoStart:!1,onExpire:()=>{notify("インターバル終了！"),setExpired(!0),resetInterval(new Date,expiryTimeDelta),onExpire&&onExpire()}}),zeroPadding=val=>`00${val}`.slice(-2),resetInterval=(0,react.useCallback)(((now,delta)=>{now.setSeconds(now.getSeconds()+delta),restart(now,!1)}),[restart]);(0,react.useEffect)((()=>{const now=new Date;resetInterval(now,expiryTimeDelta)}),[expiryTimeDelta,resetInterval]);const controlButtonStyle="w-full flex justify-center items-center p-3 hover:bg-gray-100 dark:hover:bg-gray-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",iconStyle="w-10 h-10 text-blue-500 dark:text-blue-400 transition-transform duration-200",timerClasses=["flex flex-col overflow-hidden bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl shadow-md dark:border dark:border-gray-700",{standard:"mx-2 md:mx-0",compact:"max-w-xs mx-auto",countdown:"mx-2 md:mx-0"}[variant||"standard"],className||""].filter(Boolean).join(" ");return(0,jsx_runtime.jsxs)("div",{className:timerClasses,children:[(0,jsx_runtime.jsxs)("div",{className:"compact"===variant?"text-4xl md:text-5xl font-bold p-4 text-center font-mono":"text-5xl md:text-6xl font-bold p-6 text-center font-mono bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent",children:[(0,jsx_runtime.jsx)("span",{children:zeroPadding(minutes)}),":",(0,jsx_runtime.jsx)("span",{children:zeroPadding(seconds)})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:[(0,jsx_runtime.jsx)("button",{className:controlButtonStyle,onClick:()=>{(async()=>{await requestPermission(),setExpired(!1),resume()})()},"aria-label":"再開",children:(0,jsx_runtime.jsx)(PlayIcon,{className:`${iconStyle} hover:scale-110 active:scale-95`})}),(0,jsx_runtime.jsx)("button",{className:controlButtonStyle,onClick:pause,"aria-label":"一時停止",children:(0,jsx_runtime.jsx)(PauseIcon,{className:`${iconStyle} hover:scale-110 active:scale-95`})}),(0,jsx_runtime.jsx)("button",{className:controlButtonStyle,onClick:()=>resetInterval(new Date,expiryTimeDelta),"aria-label":"リセット",children:(0,jsx_runtime.jsx)(ArrowPathIcon,{className:`${iconStyle} hover:rotate-180`})})]}),isExpired&&(0,jsx_runtime.jsx)("div",{className:"p-4 text-center bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 font-medium animate-pulse",children:"インターバル終了！"})]})};try{Timer.displayName="Timer",Timer.__docgenInfo={description:"",displayName:"Timer",props:{expiryTimeDelta:{defaultValue:null,description:"",name:"expiryTimeDelta",required:!0,type:{name:"number"}},onExpire:{defaultValue:null,description:"",name:"onExpire",required:!1,type:{name:"(() => void)"}},variant:{defaultValue:{value:"standard"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"standard"'},{value:'"compact"'},{value:'"countdown"'}]}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Timer.tsx#Timer"]={docgenInfo:Timer.__docgenInfo,name:"Timer",path:"src/components/Timer.tsx#Timer"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/react-timer-hook/dist/index.js":function(module,__unused_webpack_exports,__webpack_require__){var e,console=__webpack_require__("./node_modules/console-browserify/index.js");"undefined"!=typeof self&&self,module.exports=(e=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validate=t.Time=void 0;var n=u(r(5)),o=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}t.Time=n.default,t.Validate=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useInterval=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(7));t.useInterval=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTime=t.useStopwatch=t.useTimer=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){if((0,o.useEffect)((function(){console.warn("react-timer-hook: default export useTimer is deprecated, use named exports { useTimer, useStopwatch, useTime } instead")}),[]),e.expiryTimestamp){var t=(0,u.default)(e);return n({},t,{startTimer:t.start,stopTimer:t.pause,resetTimer:function(){}})}var r=(0,i.default)(e);return n({},r,{startTimer:r.start,stopTimer:r.pause,resetTimer:r.reset})};var o=r(0),u=c(r(4)),i=c(r(8)),a=c(r(9));function c(e){return e&&e.__esModule?e:{default:e}}t.useTimer=u.default,t.useStopwatch=i.default,t.useTime=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.expiryTimestamp,r=e.onExpire,s=e.autoStart,l=void 0===s||s,d=(0,u.useState)(t),m=o(d,2),v=m[0],p=m[1],y=(0,u.useState)(i.Time.getSecondsFromExpiry(v)),T=o(y,2),g=T[0],b=T[1],h=(0,u.useState)(l),S=o(h,2),w=S[0],O=S[1],j=(0,u.useState)(l),x=o(j,2),_=x[0],M=x[1],P=(0,u.useState)(f(v)),F=o(P,2),E=F[0],k=F[1];function I(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k(f(e)),M(t),O(t),p(e),b(i.Time.getSecondsFromExpiry(e))}function D(){var e=new Date;e.setMilliseconds(e.getMilliseconds()+1e3*g),I(e)}return(0,a.useInterval)((function(){E!==c&&k(c);var e=i.Time.getSecondsFromExpiry(v);b(e),e<=0&&(i.Validate.onExpire(r)&&r(),O(!1),k(null))}),w?E:null),n({},i.Time.getTimeFromSeconds(g),{start:function(){_?(b(i.Time.getSecondsFromExpiry(v)),O(!0)):D()},pause:function(){O(!1)},resume:D,restart:I,isRunning:w})};var u=r(0),i=r(1),a=r(2),c=1e3;function f(e){if(!i.Validate.expiryTimestamp(e))return null;var t=i.Time.getSecondsFromExpiry(e),r=Math.floor(1e3*(t-Math.floor(t)));return r>0?r:c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getTimeFromSeconds",value:function(e){var t=Math.ceil(e),r=Math.floor(t/86400),n=Math.floor(t%86400/3600),o=Math.floor(t%3600/60);return{seconds:Math.floor(t%60),minutes:o,hours:n,days:r}}},{key:"getSecondsFromExpiry",value:function(e,t){var r=e-(new Date).getTime();if(r>0){var n=r/1e3;return t?Math.round(n):n}return 0}},{key:"getSecondsFromPrevTime",value:function(e,t){var r=(new Date).getTime()-e;if(r>0){var n=r/1e3;return t?Math.round(n):n}return 0}},{key:"getSecondsFromTimeNow",value:function(){var e=new Date;return e.getTime()/1e3-60*e.getTimezoneOffset()}},{key:"getFormattedTimeFromSeconds",value:function(t,r){var n=e.getTimeFromSeconds(t),o=n.seconds,u=n.minutes,i=n.hours,a="",c=i;return"12-hour"===r&&(a=i>=12?"pm":"am",c=i%12),{seconds:o,minutes:u,hours:c,ampm:a}}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"expiryTimestamp",value:function(e){var t=new Date(e).getTime()>0;return t||console.warn("react-timer-hook: { useTimer } Invalid expiryTimestamp settings",e),t}},{key:"onExpire",value:function(e){var t=e&&"function"==typeof e;return e&&!t&&console.warn("react-timer-hook: { useTimer } Invalid onExpire settings function",e),t}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.useRef)();(0,n.useEffect)((function(){r.current=e})),(0,n.useEffect)((function(){if(!t)return function(){};var e=setInterval((function(){r.current&&r.current()}),t);return function(){return clearInterval(e)}}),[t])};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.autoStart,r=e.offsetTimestamp,c=(0,u.useState)(i.Time.getSecondsFromExpiry(r,!0)||0),f=o(c,2),s=f[0],l=f[1],d=(0,u.useState)(new Date),m=o(d,2),v=m[0],p=m[1],y=(0,u.useState)(s+i.Time.getSecondsFromPrevTime(v||0,!0)),T=o(y,2),g=T[0],b=T[1],h=(0,u.useState)(t),S=o(h,2),w=S[0],O=S[1];return(0,a.useInterval)((function(){b(s+i.Time.getSecondsFromPrevTime(v,!0))}),w?1e3:null),n({},i.Time.getTimeFromSeconds(g),{start:function(){var e=new Date;p(e),O(!0),b(s+i.Time.getSecondsFromPrevTime(e,!0))},pause:function(){l(g),O(!1)},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.Time.getSecondsFromExpiry(e,!0)||0,n=new Date;p(n),l(r),O(t),b(r+i.Time.getSecondsFromPrevTime(n,!0))},isRunning:w})};var u=r(0),i=r(1),a=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.format,r=(0,u.useState)(i.Time.getSecondsFromTimeNow()),c=o(r,2),f=c[0],s=c[1];return(0,a.useInterval)((function(){s(i.Time.getSecondsFromTimeNow())}),1e3),n({},i.Time.getFormattedTimeFromSeconds(f,t))};var u=r(0),i=r(1),a=r(2)}]))}}]);